// ä¿®å¾©å¾Œçš„ i18n.ts æ–‡ä»¶
import i18n from "i18next";
import { initReactI18next } from "react-i18next";

// å¾ž localStorage è®€å–èªžè¨€è¨­ç½®ï¼Œå¦‚æžœæ²’æœ‰å‰‡ä½¿ç”¨é»˜èªèªžè¨€ 'zh'
const savedLanguage = localStorage.getItem("language") || "zh";

// å®šç¾©é€šç”¨ç¿»è­¯
const commonTranslations = {
  en: {
    "è¼‰å…¥ä¸­...": "Loading...",
    "å…ƒ": "NT$",
    "è¨»å†Šå¸³è™Ÿ": "Register",
    "å¯†ç¢¼": "Password",
  },
  zh: {
    "è¼‰å…¥ä¸­...": "è¼‰å…¥ä¸­...",
    "å…ƒ": "å…ƒ",
    "è¨»å†Šå¸³è™Ÿ": "è¨»å†Šå¸³è™Ÿ",
    "å¯†ç¢¼": "å¯†ç¢¼",
  }
};

// å®šç¾©å„é é¢ç¿»è­¯
const translations = {
  en: {
    // NavBar
    "ä»Šæ—¥é¤é»ž": "Today's Meals",
    "ç”¨é¤ç´€éŒ„": "Dining Records",
    "åº—å“¡é»žé¤": "Staff Orders",
    "å“¡å·¥è³’å¸³ç´€éŒ„": "Staff Debt Records",
    "èœå–®èª¿æ•´": "Menu Editor",
    "ç™»å‡º": "Logout",

    // ForgotPassword
    "è«‹è¼¸å…¥é›»å­éƒµä»¶åœ°å€": "Please enter your email address",
    "é‡è¨­å¯†ç¢¼çš„é€£çµå·²ç™¼é€è‡³ {{email}}": "Password reset link has been sent to {{email}}",
    "é‡è¨­å¯†ç¢¼é€£çµå·²ç™¼é€è‡³: {{email}}": "Password reset link sent to: {{email}}",
    "è¿”å›žç™»å…¥é ": "Back to Login",
    "æ‰¾å›žå¯†ç¢¼": "Forgot Password",
    "è«‹è¼¸å…¥æ‚¨çš„é›»å­éƒµä»¶åœ°å€ï¼Œæˆ‘å€‘å°‡ç™¼é€ä¸€å°åŒ…å«é‡è¨­å¯†ç¢¼é€£çµçš„éƒµä»¶çµ¦æ‚¨ã€‚": "Please enter your email address. We will send you an email with a link to reset your password.",
    "é›»å­éƒµä»¶": "Email",
    "ç™¼é€é‡è¨­å¯†ç¢¼é€£çµ": "Send Reset Link",
    "å·²ç™¼é€": "sent",

    // LoginForm
    "æ­¤è™•ä¿ç•™æœªä¾†æ·»åŠ è³‡è¨Š": "Reserved for future information",
    "å“¡å·¥ç™»å…¥": "Staff Login",
    "å¸³è™Ÿ": "Username",
    "ç™»å…¥": "Login",
    "ç™»å…¥æˆåŠŸï¼": "Login successful!",
    "å°šæœ‰é¤˜æ¬¾æœªç¹³æ¸…!": "You still have unpaid balance!",
    "å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤": "Incorrect username or password",
    "å¿˜è¨˜å¯†ç¢¼": "Forgot Password",
    "æˆåŠŸ": "success",

    // Register
    "è¨»å†Šå¸³è™Ÿ_é é¢": "Register Account",
    "å“¡å·¥è™Ÿ": "Employee ID",
    "ç¢ºèªå¯†ç¢¼": "Confirm Password",
    "é©—è­‰å“¡å·¥è™Ÿ": "Verify Employee ID",
    "è¨»å†Š": "Register",
    "è«‹è¼¸å…¥å“¡å·¥è™Ÿ": "Please enter employee ID",
    "å“¡å·¥è™Ÿé©—è­‰æˆåŠŸï¼": "Employee ID verified successfully!",
    "ç„¡æ•ˆçš„å“¡å·¥è™Ÿï¼Œè«‹ç¢ºèªå¾Œé‡è©¦": "Invalid employee ID, please try again",
    "é©—è­‰å“¡å·¥è™Ÿæ™‚å‡ºéŒ¯:": "Error verifying employee ID:",
    "é©—è­‰å“¡å·¥è™Ÿæ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦": "Error verifying employee ID, please try again later",
    "è«‹å¡«å¯«æ‰€æœ‰æ¬„ä½": "Please fill in all fields",
    "å¯†ç¢¼èˆ‡ç¢ºèªå¯†ç¢¼ä¸ä¸€è‡´": "Password and confirmation do not match",
    "è«‹å…ˆé©—è­‰å“¡å·¥è™Ÿ": "Please verify employee ID first",
    "è¨»å†ŠæˆåŠŸï¼å³å°‡è·³è½‰è‡³ç™»å…¥é é¢": "Registration successful! Redirecting to login page",

    // MenuEditor
    "èœå–®èª¿æ•´é é¢": "Menu Editor Page",
    "ä»Šæ—¥é¤é»ž_é¸é …": "Today's Meals",
    "éžä»Šæ—¥é¤é»ž": "Not Today's Meals",
    "ç¢ºèªä¿®æ”¹": "Confirm Changes",
    "æ–°å¢žé¤é»ž": "Add Meal",
    "åˆªé™¤": "Delete",
    "ç¢ºå®šè¦åˆªé™¤é€™å€‹é¤é»žå—Žï¼Ÿ": "Are you sure you want to delete this meal?",
    "é¤é»žå·²åˆªé™¤ï¼": "Meals have been deleted!",
    "æ–°å¢žé¤é»žè³‡è¨Š": "Add Meal Info",
    "é¤é»žåç¨±": "Meal Name",
    "åœ–ç‰‡é€£çµ": "Image URL",
    "é€å‡ºæ–°å¢ž": "Submit",
    "è«‹å¡«å¯«å®Œæ•´è³‡è¨Š": "Please fill in all information",
    "é¤é»žå·²æ–°å¢žï¼": "Meal added!",
    "æ›´æ–°å¾Œé¤é»žè³‡æ–™": "Updated meal data",
    "é¤é»žå·²æ›´æ–°ï¼": "Meals updated!",
    "æŽ¨è–¦æ¯”ä¾‹": "Recommendation Rate",

    // TodayMeals
    "ä»Šæ—¥é¤é»ž_é é¢": "Today's Meals",
    "ðŸ‘ æŽ¨è–¦": "ðŸ‘ Recommended",
    "ðŸ‘Ž ä¸æŽ¨è–¦": "ðŸ‘Ž Not Recommended",

    // Records
    "æ­·å²ç”¨é¤ç´€éŒ„": "Dining History",
    "é»žé¤æ—¥æœŸ": "Order Date",
    "é¤é»ž": "Meal",
    "åƒ¹æ ¼": "Price",
    "ä»˜æ¬¾ç‹€æ³": "Payment Status",
    "æˆ‘çš„è©•åƒ¹": "My Rating",
    "å·²ä»˜æ¬¾": "Paid",
    "æœªä»˜æ¬¾": "Unpaid",
    "å–œæ­¡": "Like",
    "ä¸å–œæ­¡": "Dislike",
    "å¡«å¯«è©•è«–": "Write Comment",
    "å–æ¶ˆ": "Cancel",
    "å„²å­˜": "Save",
    "å·²å¡«å¯«": "Submitted",
    "è³’å¸³ç¸½é¡": "Total Debt",
    "ä¸‹ä¸€æ¬¡çµå¸³æœŸé™": "Next Payment Due",
    "é¦¬ä¸Šçµå¸³": "Pay Now",
    "é¦¬ä¸Šçµå¸³åŠŸèƒ½å°šæœªå¯¦ä½œï¼": "Immediate payment feature not yet implemented!",

    // StaffDebt
    "å“¡å·¥è³’å¸³ç‹€æ³": "Staff Debt Status",
    "å…¨é¸": "Select All",
    "å“¡å·¥ID": "Employee ID",
    "å“¡å·¥åç¨±": "Employee Name",
    "è³’å¸³é‡‘é¡": "Debt Amount",
    "é è­¦é¸å–å“¡å·¥": "Warn Selected Staff",
    "é¸å–çš„å“¡å·¥ ID: {{ids}}": "Selected employee IDs: {{ids}}",

    // StaffOrder
    "å“¡å·¥ IDï¼š": "Employee ID:",
    "è«‹è¼¸å…¥å“¡å·¥ ID": "Enter Employee ID",
    "å–æ¶ˆé¸æ“‡": "Deselect",
    "é¸æ“‡": "Select",
    "ç¾å ´æ”¯ä»˜": "Pay Now",
    "è³’å¸³": "Credit",
    "é€å‡ºè¨‚å–®": "Submit Order",
    "è«‹è¼¸å…¥å“¡å·¥ ID ä¸¦é¸æ“‡ä¸€é …é¤é»ž": "Please enter an employee ID and select a meal",
    "è¨‚å–®å·²é€å‡ºï¼": "Order submitted!",
    "é€å‡ºè¨‚å–®ï¼š": "Submitting order:",

    // LanguageSwitcher
    "åˆ‡æ›èªžè¨€": "Language",
    "ä¸­æ–‡": "ä¸­æ–‡",
    "è‹±æ–‡": "English"
  },
  
  zh: {
    // NavBar
    "ä»Šæ—¥é¤é»ž": "ä»Šæ—¥é¤é»ž",
    "ç”¨é¤ç´€éŒ„": "ç”¨é¤ç´€éŒ„",
    "åº—å“¡é»žé¤": "åº—å“¡é»žé¤",
    "å“¡å·¥è³’å¸³ç´€éŒ„": "å“¡å·¥è³’å¸³ç´€éŒ„",
    "èœå–®èª¿æ•´": "èœå–®èª¿æ•´",
    "ç™»å‡º": "ç™»å‡º",

    // ForgotPassword
    "è«‹è¼¸å…¥é›»å­éƒµä»¶åœ°å€": "è«‹è¼¸å…¥é›»å­éƒµä»¶åœ°å€",
    "é‡è¨­å¯†ç¢¼çš„é€£çµå·²ç™¼é€è‡³ {{email}}": "é‡è¨­å¯†ç¢¼çš„é€£çµå·²ç™¼é€è‡³ {{email}}",
    "é‡è¨­å¯†ç¢¼é€£çµå·²ç™¼é€è‡³: {{email}}": "é‡è¨­å¯†ç¢¼é€£çµå·²ç™¼é€è‡³: {{email}}",
    "è¿”å›žç™»å…¥é ": "è¿”å›žç™»å…¥é ",
    "æ‰¾å›žå¯†ç¢¼": "æ‰¾å›žå¯†ç¢¼",
    "è«‹è¼¸å…¥æ‚¨çš„é›»å­éƒµä»¶åœ°å€ï¼Œæˆ‘å€‘å°‡ç™¼é€ä¸€å°åŒ…å«é‡è¨­å¯†ç¢¼é€£çµçš„éƒµä»¶çµ¦æ‚¨ã€‚": "è«‹è¼¸å…¥æ‚¨çš„é›»å­éƒµä»¶åœ°å€ï¼Œæˆ‘å€‘å°‡ç™¼é€ä¸€å°åŒ…å«é‡è¨­å¯†ç¢¼é€£çµçš„éƒµä»¶çµ¦æ‚¨ã€‚",
    "é›»å­éƒµä»¶": "é›»å­éƒµä»¶",
    "ç™¼é€é‡è¨­å¯†ç¢¼é€£çµ": "ç™¼é€é‡è¨­å¯†ç¢¼é€£çµ",
    "å·²ç™¼é€": "å·²ç™¼é€",

    // LoginForm
    "æ­¤è™•ä¿ç•™æœªä¾†æ·»åŠ è³‡è¨Š": "æ­¤è™•ä¿ç•™æœªä¾†æ·»åŠ è³‡è¨Š",
    "å“¡å·¥ç™»å…¥": "å“¡å·¥ç™»å…¥",
    "å¸³è™Ÿ": "å¸³è™Ÿ",
    "ç™»å…¥": "ç™»å…¥",
    "ç™»å…¥æˆåŠŸï¼": "ç™»å…¥æˆåŠŸï¼",
    "å°šæœ‰é¤˜æ¬¾æœªç¹³æ¸…!": "å°šæœ‰é¤˜æ¬¾æœªç¹³æ¸…!",
    "å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤": "å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤",
    "å¿˜è¨˜å¯†ç¢¼": "å¿˜è¨˜å¯†ç¢¼",
    "æˆåŠŸ": "æˆåŠŸ",

    // Register
    "è¨»å†Šå¸³è™Ÿ_é é¢": "è¨»å†Šå¸³è™Ÿ",
    "å“¡å·¥è™Ÿ": "å“¡å·¥è™Ÿ",
    "ç¢ºèªå¯†ç¢¼": "ç¢ºèªå¯†ç¢¼",
    "é©—è­‰å“¡å·¥è™Ÿ": "é©—è­‰å“¡å·¥è™Ÿ",
    "è¨»å†Š": "è¨»å†Š",
    "è«‹è¼¸å…¥å“¡å·¥è™Ÿ": "è«‹è¼¸å…¥å“¡å·¥è™Ÿ",
    "å“¡å·¥è™Ÿé©—è­‰æˆåŠŸï¼": "å“¡å·¥è™Ÿé©—è­‰æˆåŠŸï¼",
    "ç„¡æ•ˆçš„å“¡å·¥è™Ÿï¼Œè«‹ç¢ºèªå¾Œé‡è©¦": "ç„¡æ•ˆçš„å“¡å·¥è™Ÿï¼Œè«‹ç¢ºèªå¾Œé‡è©¦",
    "é©—è­‰å“¡å·¥è™Ÿæ™‚å‡ºéŒ¯:": "é©—è­‰å“¡å·¥è™Ÿæ™‚å‡ºéŒ¯:",
    "é©—è­‰å“¡å·¥è™Ÿæ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦": "é©—è­‰å“¡å·¥è™Ÿæ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦",
    "è«‹å¡«å¯«æ‰€æœ‰æ¬„ä½": "è«‹å¡«å¯«æ‰€æœ‰æ¬„ä½",
    "å¯†ç¢¼èˆ‡ç¢ºèªå¯†ç¢¼ä¸ä¸€è‡´": "å¯†ç¢¼èˆ‡ç¢ºèªå¯†ç¢¼ä¸ä¸€è‡´",
    "è«‹å…ˆé©—è­‰å“¡å·¥è™Ÿ": "è«‹å…ˆé©—è­‰å“¡å·¥è™Ÿ",
    "è¨»å†ŠæˆåŠŸï¼å³å°‡è·³è½‰è‡³ç™»å…¥é é¢": "è¨»å†ŠæˆåŠŸï¼å³å°‡è·³è½‰è‡³ç™»å…¥é é¢",

    // MenuEditor
    "èœå–®èª¿æ•´é é¢": "èœå–®èª¿æ•´é é¢",
    "ä»Šæ—¥é¤é»ž_é¸é …": "ä»Šæ—¥é¤é»ž",
    "éžä»Šæ—¥é¤é»ž": "éžä»Šæ—¥é¤é»ž",
    "ç¢ºèªä¿®æ”¹": "ç¢ºèªä¿®æ”¹",
    "æ–°å¢žé¤é»ž": "æ–°å¢žé¤é»ž",
    "åˆªé™¤": "åˆªé™¤",
    "ç¢ºå®šè¦åˆªé™¤é€™å€‹é¤é»žå—Žï¼Ÿ": "ç¢ºå®šè¦åˆªé™¤é€™å€‹é¤é»žå—Žï¼Ÿ",
    "é¤é»žå·²åˆªé™¤ï¼": "é¤é»žå·²åˆªé™¤ï¼",
    "æ–°å¢žé¤é»žè³‡è¨Š": "æ–°å¢žé¤é»žè³‡è¨Š",
    "é¤é»žåç¨±": "é¤é»žåç¨±",
    "åœ–ç‰‡é€£çµ": "åœ–ç‰‡é€£çµ",
    "é€å‡ºæ–°å¢ž": "é€å‡ºæ–°å¢ž",
    "è«‹å¡«å¯«å®Œæ•´è³‡è¨Š": "è«‹å¡«å¯«å®Œæ•´è³‡è¨Š",
    "é¤é»žå·²æ–°å¢žï¼": "é¤é»žå·²æ–°å¢žï¼",
    "æ›´æ–°å¾Œé¤é»žè³‡æ–™": "æ›´æ–°å¾Œé¤é»žè³‡æ–™",
    "é¤é»žå·²æ›´æ–°ï¼": "é¤é»žå·²æ›´æ–°ï¼",
    "æŽ¨è–¦æ¯”ä¾‹": "æŽ¨è–¦æ¯”ä¾‹",

    // TodayMeals
    "ä»Šæ—¥é¤é»ž_é é¢": "ä»Šæ—¥é¤é»ž",
    "ðŸ‘ æŽ¨è–¦": "ðŸ‘ æŽ¨è–¦",
    "ðŸ‘Ž ä¸æŽ¨è–¦": "ðŸ‘Ž ä¸æŽ¨è–¦",

    // Records
    "æ­·å²ç”¨é¤ç´€éŒ„": "æ­·å²ç”¨é¤ç´€éŒ„",
    "é»žé¤æ—¥æœŸ": "é»žé¤æ—¥æœŸ",
    "é¤é»ž": "é¤é»ž",
    "åƒ¹æ ¼": "åƒ¹æ ¼",
    "ä»˜æ¬¾ç‹€æ³": "ä»˜æ¬¾ç‹€æ³",
    "æˆ‘çš„è©•åƒ¹": "æˆ‘çš„è©•åƒ¹",
    "å·²ä»˜æ¬¾": "å·²ä»˜æ¬¾",
    "æœªä»˜æ¬¾": "æœªä»˜æ¬¾",
    "å–œæ­¡": "å–œæ­¡",
    "ä¸å–œæ­¡": "ä¸å–œæ­¡",
    "å¡«å¯«è©•è«–": "å¡«å¯«è©•è«–",
    "å–æ¶ˆ": "å–æ¶ˆ",
    "å„²å­˜": "å„²å­˜",
    "å·²å¡«å¯«": "å·²å¡«å¯«",
    "è³’å¸³ç¸½é¡": "è³’å¸³ç¸½é¡",
    "ä¸‹ä¸€æ¬¡çµå¸³æœŸé™": "ä¸‹ä¸€æ¬¡çµå¸³æœŸé™",
    "é¦¬ä¸Šçµå¸³": "é¦¬ä¸Šçµå¸³",
    "é¦¬ä¸Šçµå¸³åŠŸèƒ½å°šæœªå¯¦ä½œï¼": "é¦¬ä¸Šçµå¸³åŠŸèƒ½å°šæœªå¯¦ä½œï¼",

    // StaffDebt
    "å“¡å·¥è³’å¸³ç‹€æ³": "å“¡å·¥è³’å¸³ç‹€æ³",
    "å…¨é¸": "å…¨é¸",
    "å“¡å·¥ID": "å“¡å·¥ID",
    "å“¡å·¥åç¨±": "å“¡å·¥åç¨±",
    "è³’å¸³é‡‘é¡": "è³’å¸³é‡‘é¡",
    "é è­¦é¸å–å“¡å·¥": "é è­¦é¸å–å“¡å·¥",
    "é¸å–çš„å“¡å·¥ ID: {{ids}}": "é¸å–çš„å“¡å·¥ ID: {{ids}}",

    // StaffOrder
    "å“¡å·¥ IDï¼š": "å“¡å·¥ IDï¼š",
    "è«‹è¼¸å…¥å“¡å·¥ ID": "è«‹è¼¸å…¥å“¡å·¥ ID",
    "å–æ¶ˆé¸æ“‡": "å–æ¶ˆé¸æ“‡",
    "é¸æ“‡": "é¸æ“‡",
    "ç¾å ´æ”¯ä»˜": "ç¾å ´æ”¯ä»˜",
    "è³’å¸³": "è³’å¸³",
    "é€å‡ºè¨‚å–®": "é€å‡ºè¨‚å–®",
    "è«‹è¼¸å…¥å“¡å·¥ ID ä¸¦é¸æ“‡ä¸€é …é¤é»ž": "è«‹è¼¸å…¥å“¡å·¥ ID ä¸¦é¸æ“‡ä¸€é …é¤é»ž",
    "è¨‚å–®å·²é€å‡ºï¼": "è¨‚å–®å·²é€å‡ºï¼",
    "é€å‡ºè¨‚å–®ï¼š": "é€å‡ºè¨‚å–®ï¼š",

    // LanguageSwitcher
    "åˆ‡æ›èªžè¨€": "åˆ‡æ›èªžè¨€",
    "ä¸­æ–‡": "ä¸­æ–‡",
    "è‹±æ–‡": "è‹±æ–‡"
  }
};

// åˆä½µé€šç”¨ç¿»è­¯å’Œé é¢ç¿»è­¯
const resources = {
  en: {
    translation: {...commonTranslations.en, ...translations.en}
  },
  zh: {
    translation: {...commonTranslations.zh, ...translations.zh}
  }
};

i18n
  .use(initReactI18next)
  .init({
    resources,
    lng: savedLanguage, // ä½¿ç”¨ä¿å­˜çš„èªžè¨€
    fallbackLng: "en",
    interpolation: {
      escapeValue: false
    }
  });

// ç•¶èªžè¨€è®Šæ›´æ™‚ï¼Œä¿å­˜åˆ° localStorage
i18n.on('languageChanged', (lng) => {
  localStorage.setItem('language', lng);
});

export default i18n;
